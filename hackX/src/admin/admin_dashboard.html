<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NagarUjjawal – Admin Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      background-color: #f8eddd;
      font-family: 'Poppins', sans-serif;
      color: #3a2d20;
    }

    .topbar {
      background-color: #c39a6b;
      color: white;
      text-align: center;
      padding: 15px;
      font-weight: 600;
      font-size: 1.3rem;
      border-radius: 0 0 25px 25px;
    }

    .card {
      background-color: #c39a6b;
      color: white;
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    .status-number {
      font-size: 1.6rem;
      font-weight: 700;
    }

    #map {
      width: 100%;
      height: 350px;
      border-radius: 15px;
    }

    .btn-logout {
      background-color: #a36b43;
      color: white;
      border: none;
      border-radius: 15px;
      padding: 8px 15px;
      font-weight: 500;
    }

    .btn-logout:hover {
      background-color: #8d5e39;
    }

    footer {
      text-align: center;
      color: #6b5744;
      font-size: 0.9rem;
      margin-top: 30px;
    }
  </style>
</head>
<body>

  <div class="topbar">
    Admin Dashboard – NagarUjjawal
  </div>

  <div class="container my-4">

    <!-- Dashboard Stats -->
    <div class="row g-3 text-center">
      <div class="col-md-4">
        <div class="card">
          <h5>Resolved</h5>
          <div class="status-number">25</div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card">
          <h5>In Progress</h5>
          <div class="status-number">12</div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card">
          <h5>Pending</h5>
          <div class="status-number">8</div>
        </div>
      </div>
    </div>

    <!-- Complaint List -->
    <div class="card my-4">
      <h5 class="mb-3 text-center">Complaint List</h5>
      <table class="table table-striped align-middle">
        <thead>
          <tr>
            <th>ID</th>
            <th>Category</th>
            <th>Location</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>#001</td>
            <td>Garbage Overflow</td>
            <td>Gandhinagar</td>
            <td><span class="badge bg-warning text-dark">Pending</span></td>
          </tr>
          <tr>
            <td>#002</td>
            <td>Broken Streetlight</td>
            <td>Ahmedabad</td>
            <td><span class="badge bg-success">Resolved</span></td>
          </tr>
          <tr>
            <td>#003</td>
            <td>Pothole</td>
            <td>Mehsana</td>
            <td><span class="badge bg-primary">In Progress</span></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Interactive Map -->
    <div class="card">
      <h5 class="text-center mb-3">Complaint Map</h5>
      <div id="map"></div>
    </div>

    <div class="text-center mt-4">
      <button class="btn-logout" onclick="logout()"><a href="admin_login.html" style="text-decoration: none; color: white;">Logout</a></button>
    </div>

  </div>

  <footer>
    © 2025 NagarUjjawal | Team SheBuilds | U.V. Patel College of Engineering
  </footer>

  <!-- Google Maps API -->
  <script>
    // Redirect if not logged in
    if (!localStorage.getItem("adminLoggedIn")) {
      window.location.href = "admin_login.html";
    }

    // Logout button
    function logout() {
      localStorage.removeItem("adminLoggedIn");
      window.location.href = "admin_login.html";
    }

    // Initialize Map
    function initMap() {
      const map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: 23.0225, lng: 72.5714 }, // Ahmedabad center
        zoom: 8,
        styles: [
          { elementType: "geometry", stylers: [{ color: "#f8eddd" }] },
          { elementType: "labels.text.fill", stylers: [{ color: "#3a2d20" }] },
          { elementType: "labels.text.stroke", stylers: [{ color: "#f8eddd" }] },
          { featureType: "poi", stylers: [{ visibility: "off" }] },
          { featureType: "road", stylers: [{ color: "#c39a6b" }] },
          { featureType: "water", stylers: [{ color: "#e0d2b9" }] }
        ]
      });

      const complaints = [
        {
          position: { lat: 23.2156, lng: 72.6369 },
          title: "Garbage Overflow – Gandhinagar",
          status: "Pending"
        },
        {
          position: { lat: 23.0225, lng: 72.5714 },
          title: "Broken Streetlight – Ahmedabad",
          status: "Resolved"
        },
        {
          position: { lat: 23.5879, lng: 72.3693 },
          title: "Pothole – Mehsana",
          status: "In Progress"
        }
      ];

      // Add markers
      complaints.forEach((issue) => {
        const marker = new google.maps.Marker({
          position: issue.position,
          map,
          title: issue.title,
          icon: {
            url:
              issue.status === "Resolved"
                ? "http://maps.google.com/mapfiles/ms/icons/green-dot.png"
                : issue.status === "In Progress"
                ? "http://maps.google.com/mapfiles/ms/icons/blue-dot.png"
                : "http://maps.google.com/mapfiles/ms/icons/yellow-dot.png"
          }
        });

        const infoWindow = new google.maps.InfoWindow({
          content: `<div><strong>${issue.title}</strong><br>Status: ${issue.status}</div>`
        });

        marker.addListener("click", () => {
          infoWindow.open(map, marker);
        });
      });
    }
  </script>

  <!-- Replace YOUR_API_KEY with your actual Google Maps API Key -->
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDl3yhByebUuTUwsWwznypXjr6c_fEGu3w&callback=initMap"></script>
</body>
</html>